-- Supprime les tables
DROP TABLE AUTRE_ADRESSE;

DROP TABLE RELAIS;

DROP TABLE LIVRAISON;

DROP TABLE APPARTENIR;

DROP TABLE COMMANDE;

DROP TABLE CARTE_4_ETOILE;

DROP TABLE CARTE_BANCAIRE;

DROP TABLE CHEQUE;

DROP TABLE PAIEMENT;

DROP TABLE CLIENT;

DROP TABLE ARTICLE;



-- Table ARTICLE
CREATE TABLE ARTICLE
(
REFERENCE CHAR(6) NOT NULL,
NPAGE VARCHAR(3) NULL,
DESIGNATION CHAR(50) NULL,
PRIXUNITAIRE NUMBER(5,2) NULL,
CONSTRAINT PK_ARTICLE PRIMARY KEY (REFERENCE)
);


-- Table PAIEMENT
CREATE TABLE PAIEMENT
(
NPAIEMENT CHAR(6) NOT NULL,
SUPPORTPAIEMENT CHAR(6) NULL,
CONSTRAINT PK_PAIEMENT PRIMARY KEY (NPAIEMENT)
);


-- Table CLIENT
CREATE TABLE CLIENT
(
NCLIENT CHAR(6) NOT NULL,
CIVILITE VARCHAR(4) NULL,
NOM VARCHAR(30) NULL,
PRENOM VARCHAR(30) NULL,
ADRESSE VARCHAR(30) NULL,
CODEPOSTALE CHAR(5) NULL,
VILLE VARCHAR(30) NULL,
TELEPHONE CHAR(10) NULL,
TPORTABLE CHAR(10) NULL,
DATENAISSANCE DATE NULL,
EMAIL VARCHAR(30) NULL,
PTFIDELITE NUMBER(5) NULL,
CONSTRAINT PK_CLIENT PRIMARY KEY (NCLIENT)
);


-- Table CARTE_BANCAIRE
CREATE TABLE CARTE_BANCAIRE
(
NCB CHAR(16) NOT NULL,
NPAIEMENT CHAR(6) NOT NULL,
NOMCB VARCHAR(30) NULL,
DATEEXPIRATION CHAR(4) NULL,
CRYPTOGRAMME CHAR(3) NULL,
TYPEPAIEMENTCB CHAR(1) NULL,
SUPPORTPAIEMENT CHAR(6) NULL,
CONSTRAINT PK_CARTE_BANCAIRE PRIMARY KEY (NCB),
CONSTRAINT FK_CARTE_BANCAIRE_PAIEMENT FOREIGN KEY (NPAIEMENT) REFERENCES PAIEMENT (NPAIEMENT)
);


-- Table CARTE_4_ETOILE
CREATE TABLE CARTE_4_ETOILE
(
NC4 CHAR(16) NOT NULL,
NPAIEMENT CHAR(6) NOT NULL,
DATENAISSANCEC4 DATE NULL,
TYPEPAIEMENTC4 CHAR(1) NULL,
SUPPORTPAIEMENT CHAR(6) NULL,
CONSTRAINT PK_CARTE_4_ETOILE PRIMARY KEY (NC4),
CONSTRAINT FK_CARTE_4_ETOILE_PAIEMENT FOREIGN KEY (NPAIEMENT) REFERENCES PAIEMENT (NPAIEMENT)
);


-- Table CHEQUE
CREATE TABLE CHEQUE
(
NPAIEMENT CHAR(6) NOT NULL,
SUPPORTPAIEMENT CHAR(6) NULL,
CONSTRAINT PK_CHEQUE PRIMARY KEY (NPAIEMENT),
CONSTRAINT FK_CHEQUE_PAIEMENT FOREIGN KEY (NPAIEMENT) REFERENCES PAIEMENT (NPAIEMENT)
);


-- Table COMMANDE
CREATE TABLE COMMANDE
(
NBON CHAR(6) NOT NULL,
NCLIENT CHAR(6) NOT NULL,
NPAIEMENT CHAR(6) NOT NULL,
DATEBON DATE NULL,
MONTANTDEDUCTION NUMBER(3) NULL,
MODELIV VARCHAR(11) NULL,
FRAISLIV NUMBER(2,1) NULL,
CONSTRAINT PK_COMMANDE PRIMARY KEY (NBON),
CONSTRAINT FK_COMMANDE_CLIENT FOREIGN KEY (NCLIENT) REFERENCES CLIENT (NCLIENT),
CONSTRAINT FK_COMMANDE_PAIEMENT FOREIGN KEY (NPAIEMENT) REFERENCES PAIEMENT (NPAIEMENT)
);


-- Table APPARTENIR
CREATE TABLE APPARTENIR
(
NBON CHAR(6) NOT NULL,
REFERENCE CHAR(6) NOT NULL,
QUANTITE NUMBER(3) NULL,
CONSTRAINT PK_APPARTENIR PRIMARY KEY (NBON, REFERENCE),
CONSTRAINT FK_APPARTENIR_COMMANDE FOREIGN KEY (NBON) REFERENCES COMMANDE (NBON),
CONSTRAINT FK_APPARTENIR_ARTICLE FOREIGN KEY (REFERENCE) REFERENCES ARTICLE (REFERENCE)
);


-- Table LIVRAISON
CREATE TABLE LIVRAISON
(
NLIV CHAR(6) NOT NULL,
NBON CHAR(6) NOT NULL,
CONSTRAINT PK_LIVRAISON PRIMARY KEY (NLIV),
CONSTRAINT FK_LIVRAISON_COMMANDE FOREIGN KEY (NBON) REFERENCES COMMANDE (NBON)
);


-- Table RELAIS
CREATE TABLE RELAIS
(
NLIV CHAR(6) NOT NULL,
NPOINTRELAIS CHAR(5) NULL,
NOMPOINTRELAIS VARCHAR(50) NULL,
ADRESSEPOINTRELAIS VARCHAR(30) NULL,
CODEPOSTALEPOINTRELAIS CHAR(5) NULL,
VILLEPOINTRELAIS VARCHAR(30) NULL,
CONSTRAINT PK_RELAIS PRIMARY KEY (NLIV),
CONSTRAINT FK_RELAIS_LIVRAISON FOREIGN KEY (NLIV) REFERENCES LIVRAISON (NLIV)
);


-- Table AUTRE_ADRESSE
CREATE TABLE AUTRE_ADRESSE
(
NLIV CHAR(6) NOT NULL,
NOMLIV VARCHAR(30) NULL,
PRENOMLIV VARCHAR(30) NULL,
ADRESSELIV VARCHAR(30) NULL,
CODEPOSTALELIV CHAR(5) NULL,
VILLELIV VARCHAR(30) NULL,
TELEPHONELIV CHAR(10) NULL,
CONSTRAINT PK_AUTRE_ADRESSE PRIMARY KEY (NLIV),
CONSTRAINT FK_AUTRE_ADRESSE_LIVRAISON FOREIGN KEY (NLIV) REFERENCES LIVRAISON (NLIV)
);
